{% extends "base.html" %}

{% block content %}

<h2>{{ description }} at {{ time }}</h2>
<p>Fixture owner: {{ owner }}</p>
<a class="pure-button" href="fixtureeditform?fixtureid={{ fixtureid }}">Edit fixture data</a>
<br><br>

{% if participants|length >0 %}
<p><b>Playing:</b></p>
<ol>
    {% for n in participants %}
    {% if n.IsPlaying %}
    <li><a href="participant?fixtureid={{ fixtureid }}&userid={{ n.Userid }}">
        {{ n.FirstName }} {{ n.LastName }}</a></li>
    {% endif %}
    {% endfor %}
</ol>

<p><b>Wants to play:</b></p>
<ol>
    {% for n in participants %}
    {% if not n.IsPlaying and n.WantsToPlay %}
    <li><a href="participant?fixtureid={{ fixtureid }}&userid={{ n.Userid }}">
        {{ n.FirstName }} {{ n.LastName }}</a></li>
    {% endif %}
    {% endfor %}
</ol>

<p><b>Doesn't want to play or hasn't declared:</b></p>
<ol>
    {% for n in participants %}
    {% if not n.IsPlaying and (not n.WantsToPlay or n.WantsToPlay is null) %}
    <li><a href="participant?fixtureid={{ fixtureid }}&userid={{ n.Userid }}">
        {{ n.FirstName }} {{ n.LastName }}</a></li>
    {% endif %}
    {% endfor %}
</ol>

<br>

<a class="pure-button" href="fixturewantstoplayform?fixtureid={{ fixtureid }}">Set wants to play</a>
<a class="pure-button" href="fixturesetbookersplaying?fixtureid={{ fixtureid }}">Set bookers playing</a>
<br><br>
<a class="pure-button" href="fixturesetplayingform?fixtureid={{ fixtureid }}">Set playing</a>
<a class="pure-button" href="fixtureresetplaying?fixtureid={{ fixtureid }}">Reset playing</a>
<br><br>
<a class="pure-button" href="fixturedelusersform?fixtureid={{ fixtureid }}">Remove</a>
{% else %}
<p>No participants</p>
{% endif %}
<a class="pure-button" href="fixtureaddusersform?fixtureid={{ fixtureid }}">Add</a>
<br><br>

{% if bookings|length >1 %}
    <b>Courts...</b><br>
    <table class="pure-table">
    {% for key, r in bookings %}
    {% if key == 0 %}<thead>{% endif %}
    <tr>
    {% for c in r %}
    {% if key == 0 %}
        <th>{{ c }}</th>
    {% else %}
        <td>{{ c }}</td>
    {% endif %}
    {% endfor %}
    {% if key == 0 %}</thead>{% endif %}
    {% endfor %}
    </table>
{% else %}
    No bookings<br>
{% endif %}

<br><br>
<a class="pure-button" href="series?seriesid={{ seriesid }}">Back to series</a>

<br><br>
<a class="pure-button" 
href="fixturedeleteform?seriesid={{ seriesid }}&fixtureid={{ fixtureid }}">Delete fixture</a>

{% endblock %}